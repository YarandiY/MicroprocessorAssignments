STACK SEGMENT PARA STACK
DB 64 DUP (' ')
STACK ENDS


DATA SEGMENT PARA 'DATA'
TIME_AUX DB 0
BALL_X DW 0AH
BALL_Y DW 0AH
BALL_SIZE DW 04H
BALL_VEL_X DW 02H
BALL_VEL_Y DW 02H
DATA ENDS


CODE SEGMENT PARA 'CODE'

MAIN PROC FAR
;ASSUME cs:CODE,ds:DATA,ss:STACK
MOV AX,@DATA
MOV DS, AX

CALL CLEAR_SCREEN

checkTime:
MOV AH, 2CH
INT 21H

CMP DL, TIME_AUX
JE checkTime

MOV TIME_AUX, DL

CALL CLEAR_SCREEN

CALL MOVE_BALL

CALL DRAW_BALL

JMP checkTime


RET
MAIN ENDP

DRAW_BALL PROC NEAR
MOV CX, BALL_X
MOV DX, BALL_Y

draw:
MOV AH, 0CH
MOV AL, 0FH
MOV BH, 00H
INT 10H

INC CX
MOV AX, CX
SUB AX, BALL_X
CMP AX, BALL_SIZE
JNG draw

MOV CX, BALL_X
INC DX

MOV AX, DX
SUB AX, BALL_Y
CMP AX, BALL_SIZE
JNG draw

RET
DRAW_BALL ENDP

CLEAR_SCREEN PROC NEAR

MOV AH, 00H
MOV AL, 13H
INT 10H

MOV AH, 00h
MOV BH, 00H
MOV BL, 00H
INT 10H

RET
CLEAR_SCREEN ENDP

MOVE_BALL PROC NEAR

MOV AX, BALL_VEL_X
ADD BALL_X, AX
MOV AX, BALL_VEL_Y
ADD BALL_Y, AX

RET
MOVE_BALL ENDP

CODE ENDS
END



; [SOURCE]: D:\Courses\Microprocessor\HWs\HW3\Pong.asm
